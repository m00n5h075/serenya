{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.213.0"},"children":{"SerenyaBackend-dev":{"id":"SerenyaBackend-dev","path":"SerenyaBackend-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.213.0"},"children":{"SerenyaEncryptionKey":{"id":"SerenyaEncryptionKey","path":"SerenyaBackend-dev/SerenyaEncryptionKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaEncryptionKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"description":"Serenya dev encryption key for PHI data","enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:aws:iam::",{"Ref":"AWS::AccountId"},":root"]]}},"Resource":"*"},{"Action":["kms:CreateGrant","kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Condition":{"StringEquals":{"kms:ViaService":"secretsmanager.eu-west-1.amazonaws.com"}},"Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:aws:iam::",{"Ref":"AWS::AccountId"},":root"]]}},"Resource":"*"}],"Version":"2012-10-17"}}}}}},"SerenyaVpc":{"id":"SerenyaVpc","path":"SerenyaBackend-dev/SerenyaVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcPublicSubnet1RouteTable106C458A"},"subnetId":{"Ref":"SerenyaVpcPublicSubnet1SubnetF87D5348"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SerenyaVpcIGW6F2ACAD3"},"routeTableId":{"Ref":"SerenyaVpcPublicSubnet1RouteTable106C458A"}}}},"EIP":{"id":"EIP","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["SerenyaVpcPublicSubnet1EIPAA478EBC","AllocationId"]},"subnetId":{"Ref":"SerenyaVpcPublicSubnet1SubnetF87D5348"},"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcPublicSubnet2RouteTable41C6D820"},"subnetId":{"Ref":"SerenyaVpcPublicSubnet2SubnetA76F987B"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SerenyaBackend-dev/SerenyaVpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SerenyaVpcIGW6F2ACAD3"},"routeTableId":{"Ref":"SerenyaVpcPublicSubnet2RouteTable41C6D820"}}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcPrivateSubnet1RouteTableE7AD75E2"},"subnetId":{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SerenyaVpcPublicSubnet1NATGatewayC096DC8D"},"routeTableId":{"Ref":"SerenyaVpcPrivateSubnet1RouteTableE7AD75E2"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcPrivateSubnet2RouteTable2474897C"},"subnetId":{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SerenyaBackend-dev/SerenyaVpc/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"SerenyaVpcPublicSubnet1NATGatewayC096DC8D"},"routeTableId":{"Ref":"SerenyaVpcPrivateSubnet2RouteTable2474897C"}}}}}},"DatabaseSubnet1":{"id":"DatabaseSubnet1","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.4.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Database"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcDatabaseSubnet1RouteTableE1B7D741"},"subnetId":{"Ref":"SerenyaVpcDatabaseSubnet1Subnet7E7692B7"}}}}}},"DatabaseSubnet2":{"id":"DatabaseSubnet2","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.213.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.5.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Database"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"Acl":{"id":"Acl","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SerenyaBackend-dev/SerenyaVpc/DatabaseSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SerenyaVpcDatabaseSubnet2RouteTable0800FF4F"},"subnetId":{"Ref":"SerenyaVpcDatabaseSubnet2SubnetABEADD14"}}}}}},"IGW":{"id":"IGW","path":"SerenyaBackend-dev/SerenyaVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SerenyaBackend-dev/SerenyaVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"SerenyaBackend-dev/SerenyaVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"SerenyaVpcIGW6F2ACAD3"},"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"SerenyaBackend-dev/SerenyaVpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.213.0","metadata":[]},"children":{"Default":{"id":"Default","path":"SerenyaBackend-dev/SerenyaVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"SerenyaBackend-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.213.0"},"children":{"Staging":{"id":"Staging","path":"SerenyaBackend-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"Role":{"id":"Role","path":"SerenyaBackend-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}},"Handler":{"id":"Handler","path":"SerenyaBackend-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"DatabaseSecret":{"id":"DatabaseSecret","path":"SerenyaBackend-dev/DatabaseSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DatabaseSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Serenya dev database credentials","generateSecretString":{"secretStringTemplate":"{\"username\":\"serenya_admin\"}","generateStringKey":"password","excludeCharacters":"\"@/\\","passwordLength":32},"kmsKeyId":{"Fn::GetAtt":["SerenyaEncryptionKey30AB90B6","Arn"]},"name":"serenya/dev/database"}}},"Attachment":{"id":"Attachment","path":"SerenyaBackend-dev/DatabaseSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DatabaseSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DatabaseSecret86DBB7B3"},"targetId":{"Ref":"SerenyaDatabase21D84656"},"targetType":"AWS::RDS::DBCluster"}}}}}}},"DatabaseSecurityGroup":{"id":"DatabaseSecurityGroup","path":"SerenyaBackend-dev/DatabaseSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DatabaseSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for PostgreSQL database","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}},"from SerenyaBackenddevLambdaSecurityGroupC486A3BA:5432":{"id":"from SerenyaBackenddevLambdaSecurityGroupC486A3BA:5432","path":"SerenyaBackend-dev/DatabaseSecurityGroup/from SerenyaBackenddevLambdaSecurityGroupC486A3BA:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda access to PostgreSQL","fromPort":5432,"groupId":{"Fn::GetAtt":["DatabaseSecurityGroup7319C0F6","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]},"toPort":5432}}}}},"LambdaSecurityGroup":{"id":"LambdaSecurityGroup","path":"SerenyaBackend-dev/LambdaSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/LambdaSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Lambda functions","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"SerenyaVpcD4692594"}}}}}},"SerenyaDatabase":{"id":"SerenyaDatabase","path":"SerenyaBackend-dev/SerenyaDatabase","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseCluster","version":"2.213.0","metadata":[]},"children":{"Subnets":{"id":"Subnets","path":"SerenyaBackend-dev/SerenyaDatabase/Subnets","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.213.0","metadata":[]},"children":{"Default":{"id":"Default","path":"SerenyaBackend-dev/SerenyaDatabase/Subnets/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnets for SerenyaDatabase database","subnetIds":[{"Ref":"SerenyaVpcDatabaseSubnet1Subnet7E7692B7"},{"Ref":"SerenyaVpcDatabaseSubnet2SubnetABEADD14"}]}}}}},"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup":{"id":"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","path":"SerenyaBackend-dev/SerenyaDatabase/AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaDatabase/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBCluster","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBCluster","aws:cdk:cloudformation:props":{"backupRetentionPeriod":7,"copyTagsToSnapshot":true,"databaseName":"serenya","dbClusterParameterGroupName":"default.aurora-postgresql15","dbSubnetGroupName":{"Ref":"SerenyaDatabaseSubnets4D69499B"},"deletionProtection":false,"engine":"aurora-postgresql","engineVersion":"15.8","kmsKeyId":{"Fn::GetAtt":["SerenyaEncryptionKey30AB90B6","Arn"]},"masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DatabaseSecret86DBB7B3"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DatabaseSecret86DBB7B3"},":SecretString:password::}}"]]},"port":5432,"serverlessV2ScalingConfiguration":{"minCapacity":0.5,"maxCapacity":16},"storageEncrypted":true,"vpcSecurityGroupIds":[{"Fn::GetAtt":["DatabaseSecurityGroup7319C0F6","GroupId"]}]}}},"writer":{"id":"writer","path":"SerenyaBackend-dev/SerenyaDatabase/writer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaDatabase/writer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"dbClusterIdentifier":{"Ref":"SerenyaDatabase21D84656"},"dbInstanceClass":"db.serverless","engine":"aurora-postgresql","promotionTier":0,"publiclyAccessible":false}}}}}}},"SerenyaApiSecrets":{"id":"SerenyaApiSecrets","path":"SerenyaBackend-dev/SerenyaApiSecrets","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApiSecrets/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Serenya dev API secrets","generateSecretString":{"secretStringTemplate":"{\"jwtSecret\":\"\",\"anthropicApiKey\":\"\",\"googleClientId\":\"\",\"googleClientSecret\":\"\"}","generateStringKey":"jwtSecret","excludeCharacters":"\"@/\\","passwordLength":64},"kmsKeyId":{"Fn::GetAtt":["SerenyaEncryptionKey30AB90B6","Arn"]},"name":"serenya/dev/api-secrets"}}}}},"TempFilesBucket":{"id":"TempFilesBucket","path":"SerenyaBackend-dev/TempFilesBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/TempFilesBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["SerenyaEncryptionKey30AB90B6","Arn"]}}}]},"bucketName":{"Fn::Join":["",["serenya-temp-files-dev-",{"Ref":"AWS::AccountId"}]]},"corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["POST","PUT"],"allowedOrigins":["http://localhost:*"]}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":1,"id":"DeleteTempFiles","status":"Enabled"},{"abortIncompleteMultipartUpload":{"daysAfterInitiation":1},"id":"DeleteIncompleteUploads","status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"SerenyaBackend-dev/TempFilesBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/TempFilesBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"TempFilesBucketC6626CD1"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["TempFilesBucketC6626CD1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TempFilesBucketC6626CD1","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["TempFilesBucketC6626CD1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TempFilesBucketC6626CD1","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"SerenyaBackend-dev/TempFilesBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.213.0","metadata":[]},"children":{"Default":{"id":"Default","path":"SerenyaBackend-dev/TempFilesBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"SerenyaBackend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.213.0"},"children":{"Staging":{"id":"Staging","path":"SerenyaBackend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"Role":{"id":"Role","path":"SerenyaBackend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}},"Handler":{"id":"Handler","path":"SerenyaBackend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"SerenyaBackend-dev/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.213.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"SerenyaBackend-dev/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}],"policies":[{"policyName":"SerenyaLambdaPolicy","policyDocument":{"Statement":[{"Action":"rds-db:connect","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:rds-db:eu-west-1:",{"Ref":"AWS::AccountId"},":dbuser:",{"Fn::GetAtt":["SerenyaDatabase21D84656","DBClusterResourceId"]},"/serenya_app"]]}},{"Action":["s3:DeleteObject","s3:GetObject","s3:PutObject","s3:PutObjectAcl"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["TempFilesBucketC6626CD1","Arn"]},"/*"]]}},{"Action":["secretsmanager:CreateSecret","secretsmanager:GetSecretValue","secretsmanager:UpdateSecret"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:secretsmanager:eu-west-1:",{"Ref":"AWS::AccountId"},":secret:serenya/dev/app-database*"]]},{"Ref":"DatabaseSecret86DBB7B3"},{"Ref":"SerenyaApiSecretsA24BF8CE"}]},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SerenyaEncryptionKey30AB90B6","Arn"]}},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":["arn:aws:bedrock:eu-west-1::foundation-model/anthropic.claude-3-haiku-20240307-v1:0","arn:aws:bedrock:eu-west-1::foundation-model/anthropic.claude-3-sonnet-20240229-v1:0"]}],"Version":"2012-10-17"}}]}}}}},"AuthFunction":{"id":"AuthFunction","path":"SerenyaBackend-dev/AuthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/AuthFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/AuthFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/AuthFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/AuthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"93f142acc84e68f7f2b3f55f2b7a1df919d52cbdc037ac199575e0b7c2b2b442.zip"},"description":"Google OAuth verification and JWT generation","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"auth.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/AuthFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/AuthFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/AuthFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.213.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"UserProfileFunction":{"id":"UserProfileFunction","path":"SerenyaBackend-dev/UserProfileFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/UserProfileFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/UserProfileFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/UserProfileFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/UserProfileFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"90441e9c7ac9eb3c56b2cc8c0aaf480de049e416e37cb923105c671d6923900c.zip"},"description":"User profile management","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"userProfile.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/UserProfileFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/UserProfileFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/UserProfileFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"UploadFunction":{"id":"UploadFunction","path":"SerenyaBackend-dev/UploadFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/UploadFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/UploadFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/UploadFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/UploadFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"60294937974a75dc6f335625eff3351f2855a2a750d88c6fc4e7fe0a7341684e.zip"},"description":"File upload with virus scanning","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"upload.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":60,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/UploadFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/UploadFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/UploadFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"ProcessFunction":{"id":"ProcessFunction","path":"SerenyaBackend-dev/ProcessFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/ProcessFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/ProcessFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/ProcessFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ProcessFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"025373e7bd7deb25884be8ae3b259337a1621d1b35bdd5ad291aa826ab1c4593.zip"},"description":"AI processing with Anthropic Claude","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"process.handler","memorySize":1024,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":180,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/ProcessFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ProcessFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/ProcessFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"StatusFunction":{"id":"StatusFunction","path":"SerenyaBackend-dev/StatusFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/StatusFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/StatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/StatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/StatusFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"c5a222f586da5b9a843d9ca590ee5848aee3642fe5ad724584b8096f7b080450.zip"},"description":"Processing status tracking","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"status.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/StatusFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/StatusFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/StatusFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"ResultFunction":{"id":"ResultFunction","path":"SerenyaBackend-dev/ResultFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/ResultFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/ResultFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/ResultFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ResultFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"bf162bbe32b14c897678e08c02122a8cc71faafd5d91452179f71b521a97b3d4.zip"},"description":"Results retrieval","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"result.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/ResultFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ResultFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/ResultFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"RetryFunction":{"id":"RetryFunction","path":"SerenyaBackend-dev/RetryFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/RetryFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/RetryFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/RetryFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/RetryFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"9981504748c3a5cdcc15f1b0560eb4aeb36fab6b2d329fc176e880cf5be0d350.zip"},"description":"Processing retry management","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"retry.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/RetryFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/RetryFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/RetryFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"DoctorReportFunction":{"id":"DoctorReportFunction","path":"SerenyaBackend-dev/DoctorReportFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/DoctorReportFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/DoctorReportFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/DoctorReportFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DoctorReportFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"73ca2f8c019f6352c1b0eadf053e3981fcdb86ef8046836373913463b10ef225.zip"},"description":"Premium doctor report generation","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"doctorReport.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":120,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/DoctorReportFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DoctorReportFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/DoctorReportFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"CleanupFunction":{"id":"CleanupFunction","path":"SerenyaBackend-dev/CleanupFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/CleanupFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/CleanupFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/CleanupFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/CleanupFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"5016acec5b2c48e82278be9635334f96a365e1e5cd04f761f1d3b94e045ae580.zip"},"description":"S3 temporary file cleanup after successful Flutter storage","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"cleanup.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/CleanupFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/CleanupFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/CleanupFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"AuthorizerFunction":{"id":"AuthorizerFunction","path":"SerenyaBackend-dev/AuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/AuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/AuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/AuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/AuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"274b6e23fc4ae55d682edc5fd894c32a61c3c5fb5d56961ee27335f677fab0a2.zip"},"description":"JWT token authorization","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true","TOKEN_ISSUER":"serenya.health","TOKEN_AUDIENCE":"serenya-mobile-app"}},"handler":"authorizer.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/AuthorizerFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/AuthorizerFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/AuthorizerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"SerenyaBackenddevJWTAuthorizer6D9C8E7E:Permissions":{"id":"SerenyaBackenddevJWTAuthorizer6D9C8E7E:Permissions","path":"SerenyaBackend-dev/AuthorizerFunction/SerenyaBackenddevJWTAuthorizer6D9C8E7E:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthorizerFunctionB4DBAA43","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/authorizers/",{"Ref":"JWTAuthorizerE8D8D90E"}]]}}}}}},"DatabaseInitFunction":{"id":"DatabaseInitFunction","path":"SerenyaBackend-dev/DatabaseInitFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/DatabaseInitFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/DatabaseInitFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/DatabaseInitFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DatabaseInitFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"64c91c34edc7c3c204169575821c7439a3896bac76565484074370d179c6b63d.zip"},"description":"Database schema initialization and migrations","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":300,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/DatabaseInitFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/DatabaseInitFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/DatabaseInitFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"ChatPromptsFunction":{"id":"ChatPromptsFunction","path":"SerenyaBackend-dev/ChatPromptsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/ChatPromptsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/ChatPromptsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/ChatPromptsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatPromptsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"47dc892ecdfa9e75e620e025d979830ce590e948ce835858cdca72ff126b1f20.zip"},"description":"Chat prompts retrieval for conversation starters","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"chatPrompts.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/ChatPromptsFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatPromptsFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/ChatPromptsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"ChatMessagesFunction":{"id":"ChatMessagesFunction","path":"SerenyaBackend-dev/ChatMessagesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/ChatMessagesFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/ChatMessagesFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/ChatMessagesFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatMessagesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"710858e5a684314bf149480f36bb5791060a95745c5049774e30949cdb0a0e5e.zip"},"description":"Chat message processing with AI response generation","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true","BEDROCK_MODEL_ID":"anthropic.claude-3-haiku-20240307-v1:0"}},"handler":"chatMessages.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":30,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/ChatMessagesFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatMessagesFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/ChatMessagesFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"ChatStatusFunction":{"id":"ChatStatusFunction","path":"SerenyaBackend-dev/ChatStatusFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/ChatStatusFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/ChatStatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/ChatStatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatStatusFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"d74c42e2b21ad611812d454588852f36000f3ef66cf7524c96f680b0fd5e046f.zip"},"description":"Chat response status polling","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"chatStatus.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/ChatStatusFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ChatStatusFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/ChatStatusFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"SubscriptionsFunction":{"id":"SubscriptionsFunction","path":"SerenyaBackend-dev/SubscriptionsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SerenyaBackend-dev/SubscriptionsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"SerenyaBackend-dev/SubscriptionsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"SerenyaBackend-dev/SubscriptionsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SubscriptionsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-eu-west-1"},"s3Key":"83673c5c109a948cf944646a83662a784c6d4385cff694341326e0983e2fe98d.zip"},"description":"Subscription management and billing","environment":{"variables":{"REGION":"eu-west-1","ENVIRONMENT":"dev","DB_HOST":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Address"]},"DB_PORT":{"Fn::GetAtt":["SerenyaDatabase21D84656","Endpoint.Port"]},"DB_NAME":"serenya","DB_SECRET_ARN":{"Ref":"DatabaseSecret86DBB7B3"},"TEMP_BUCKET_NAME":{"Ref":"TempFilesBucketC6626CD1"},"API_SECRETS_ARN":{"Ref":"SerenyaApiSecretsA24BF8CE"},"KMS_KEY_ID":{"Ref":"SerenyaEncryptionKey30AB90B6"},"ENABLE_DETAILED_LOGGING":"true"}},"handler":"subscriptions.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs18.x","timeout":15,"vpcConfig":{"subnetIds":[{"Ref":"SerenyaVpcPrivateSubnet1Subnet2E20D858"},{"Ref":"SerenyaVpcPrivateSubnet2SubnetD7BD4087"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSecurityGroup0BD9FC99","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"SerenyaBackend-dev/SubscriptionsFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.213.0"},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SubscriptionsFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"LogGroup":{"id":"LogGroup","path":"SerenyaBackend-dev/SubscriptionsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"JWTAuthorizer":{"id":"JWTAuthorizer","path":"SerenyaBackend-dev/JWTAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.TokenAuthorizer","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/JWTAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["AuthorizerFunctionB4DBAA43","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["AuthorizerFunctionB4DBAA43","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthorizerFunctionB4DBAA43","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"SerenyaJWTAuthorizer","restApiId":{"Ref":"SerenyaApi961F1E55"},"type":"TOKEN"}}}}},"SerenyaApi":{"id":"SerenyaApi","path":"SerenyaBackend-dev/SerenyaApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"Serenya AI Health Agent API - dev","endpointConfiguration":{"types":["REGIONAL"]},"name":"serenya-api-dev"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"SerenyaBackend-dev/SerenyaApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.213.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"SerenyaBackend-dev/SerenyaApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"SerenyaBackend-dev/SerenyaApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["SerenyaApiCloudWatchRole9E2E72EB","Arn"]}}}},"Deployment":{"id":"Deployment","path":"SerenyaBackend-dev/SerenyaApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Serenya AI Health Agent API - dev","restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"DeploymentStage.dev":{"id":"DeploymentStage.dev","path":"SerenyaBackend-dev/SerenyaApi/DeploymentStage.dev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/DeploymentStage.dev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"SerenyaApiDeployment9A430DAE9138719efe654df833b6c3921fa35284"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":200,"throttlingRateLimit":100}],"restApiId":{"Ref":"SerenyaApi961F1E55"},"stageName":"dev"}}}}},"Endpoint":{"id":"Endpoint","path":"SerenyaBackend-dev/SerenyaApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"Default":{"id":"Default","path":"SerenyaBackend-dev/SerenyaApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.213.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["SerenyaApi961F1E55","RootResourceId"]},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"auth":{"id":"auth","path":"SerenyaBackend-dev/SerenyaApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SerenyaApi961F1E55","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiauthA4A1C07F"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"google":{"id":"google","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiauthA4A1C07F"},"pathPart":"google","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiauthgoogle2CDDBC50"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/auth/google"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/auth/google"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"SerenyaApiauthgoogle2CDDBC50"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"google-onboarding":{"id":"google-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiauthA4A1C07F"},"pathPart":"google-onboarding","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiauthgoogleonboardingDDFF4576"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/auth/google-onboarding"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.google-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/auth/google-onboarding"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/google-onboarding/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"SerenyaApiauthgoogleonboardingDDFF4576"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"oauth-onboarding":{"id":"oauth-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiauthA4A1C07F"},"pathPart":"oauth-onboarding","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiauthoauthonboardingB9E1B993"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/auth/oauth-onboarding"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..auth.oauth-onboarding","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/auth/oauth-onboarding"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/auth/oauth-onboarding/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"400","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}},{"statusCode":"500","responseParameters":{"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"SerenyaApiauthoauthonboardingB9E1B993"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}},"user":{"id":"user","path":"SerenyaBackend-dev/SerenyaApi/Default/user","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/user/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SerenyaApi961F1E55","RootResourceId"]},"pathPart":"user","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/user/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/user/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiuserFF13A6AA"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"profile":{"id":"profile","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiuserFF13A6AA"},"pathPart":"profile","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiuserprofileCB053673"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserProfileFunctionF5A2461B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/user/profile"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserProfileFunctionF5A2461B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/user/profile"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/user/profile/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserProfileFunctionF5A2461B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SerenyaApiuserprofileCB053673"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}},"api":{"id":"api","path":"SerenyaBackend-dev/SerenyaApi/Default/api","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SerenyaApi961F1E55","RootResourceId"]},"pathPart":"api","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapi446775AA"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"v1":{"id":"v1","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapi446775AA"},"pathPart":"v1","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv14ABB7B5A"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"process":{"id":"process","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv14ABB7B5A"},"pathPart":"process","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1process29862BC2"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"upload":{"id":"upload","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"upload","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processuploadD4F3885C"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadFunction18838DD8","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/api/v1/process/upload"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.upload","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadFunction18838DD8","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/api/v1/process/upload"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/upload/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadFunction18838DD8","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.header.Content-Type":true},"resourceId":{"Ref":"SerenyaApiapiv1processuploadD4F3885C"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"status":{"id":"status","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"status","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processstatus741E1B89"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"{jobId}":{"id":"{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1processstatus741E1B89"},"pathPart":"{jobId}","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processstatusjobId56622832"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["StatusFunction598A4497","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/api/v1/process/status/*"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.status.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["StatusFunction598A4497","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/api/v1/process/status/*"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/status/{jobId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["StatusFunction598A4497","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.path.jobId":true},"resourceId":{"Ref":"SerenyaApiapiv1processstatusjobId56622832"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}},"result":{"id":"result","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"result","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processresult295F2A1C"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"{jobId}":{"id":"{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1processresult295F2A1C"},"pathPart":"{jobId}","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processresultjobId0A980F14"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ResultFunctionB52330A7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/api/v1/process/result/*"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.process.result.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ResultFunctionB52330A7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/api/v1/process/result/*"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/result/{jobId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ResultFunctionB52330A7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.path.jobId":true},"resourceId":{"Ref":"SerenyaApiapiv1processresultjobId0A980F14"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}},"retry":{"id":"retry","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"retry","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processretryCD5D1F00"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"{jobId}":{"id":"{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1processretryCD5D1F00"},"pathPart":"{jobId}","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processretryjobId4A76E717"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetryFunction31519513","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/api/v1/process/retry/*"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.retry.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RetryFunction31519513","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/api/v1/process/retry/*"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/retry/{jobId}/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["RetryFunction31519513","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.path.jobId":true},"resourceId":{"Ref":"SerenyaApiapiv1processretryjobId4A76E717"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}},"doctor-report":{"id":"doctor-report","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"doctor-report","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processdoctorreport764BEBC9"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DoctorReportFunction156B2584","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/api/v1/process/doctor-report"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.process.doctor-report","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DoctorReportFunction156B2584","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/api/v1/process/doctor-report"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/doctor-report/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DoctorReportFunction156B2584","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SerenyaApiapiv1processdoctorreport764BEBC9"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"cleanup":{"id":"cleanup","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1process29862BC2"},"pathPart":"cleanup","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processcleanup4190E7D7"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"{jobId}":{"id":"{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1processcleanup4190E7D7"},"pathPart":"{jobId}","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1processcleanupjobId3B533B40"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"DELETE":{"id":"DELETE","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/DELETE/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CleanupFunction1604930F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/DELETE/api/v1/process/cleanup/*"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/DELETE/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.DELETE..api.v1.process.cleanup.{jobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CleanupFunction1604930F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/DELETE/api/v1/process/cleanup/*"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/process/cleanup/{jobId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CleanupFunction1604930F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.path.jobId":true},"resourceId":{"Ref":"SerenyaApiapiv1processcleanupjobId3B533B40"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}}}},"reports":{"id":"reports","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/reports","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/reports/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv14ABB7B5A"},"pathPart":"reports","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/reports/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/reports/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1reports3CDA505F"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"chat":{"id":"chat","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv14ABB7B5A"},"pathPart":"chat","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chat5272FD55"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"prompts":{"id":"prompts","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1chat5272FD55"},"pathPart":"prompts","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chatpromptsCB3C7F05"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatPromptsFunction55316BDE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/api/v1/chat/prompts"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatPromptsFunction55316BDE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/api/v1/chat/prompts"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/prompts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ChatPromptsFunction55316BDE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.querystring.content_type":true},"resourceId":{"Ref":"SerenyaApiapiv1chatpromptsCB3C7F05"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"messages":{"id":"messages","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1chat5272FD55"},"pathPart":"messages","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chatmessagesE71B885B"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"POST":{"id":"POST","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/POST/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatMessagesFunction8684B75C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/POST/api/v1/chat/messages"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/POST/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.POST..api.v1.chat.messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatMessagesFunction8684B75C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/POST/api/v1/chat/messages"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/messages/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ChatMessagesFunction8684B75C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SerenyaApiapiv1chatmessagesE71B885B"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}},"jobs":{"id":"jobs","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1chat5272FD55"},"pathPart":"jobs","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chatjobs788103A9"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"{job_id}":{"id":"{job_id}","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1chatjobs788103A9"},"pathPart":"{job_id}","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chatjobsjobid1BFC6554"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"status":{"id":"status","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApiapiv1chatjobsjobid1BFC6554"},"pathPart":"status","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApiapiv1chatjobsjobidstatus2443EF7B"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatStatusFunction10E23594","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/api/v1/chat/jobs/*/status"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..api.v1.chat.jobs.{job_id}.status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatStatusFunction10E23594","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/api/v1/chat/jobs/*/status"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/api/v1/chat/jobs/{job_id}/status/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ChatStatusFunction10E23594","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"requestParameters":{"method.request.path.job_id":true},"resourceId":{"Ref":"SerenyaApiapiv1chatjobsjobidstatus2443EF7B"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}}}}}}}}}},"subscriptions":{"id":"subscriptions","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["SerenyaApi961F1E55","RootResourceId"]},"pathPart":"subscriptions","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApisubscriptions59DE7B79"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"current":{"id":"current","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"SerenyaApisubscriptions59DE7B79"},"pathPart":"current","restApiId":{"Ref":"SerenyaApi961F1E55"}}}},"OPTIONS":{"id":"OPTIONS","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'http://localhost:*'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'","method.response.header.Access-Control-Allow-Credentials":"'true'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"SerenyaApisubscriptionscurrent82971FD7"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}},"GET":{"id":"GET","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current":{"id":"ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/GET/ApiPermission.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsFunctionDABFA3A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/",{"Ref":"SerenyaApiDeploymentStagedevC49EB2C2"},"/GET/subscriptions/current"]]}}}},"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current":{"id":"ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/GET/ApiPermission.Test.SerenyaBackenddevSerenyaApiC0B2749B.GET..subscriptions.current","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubscriptionsFunctionDABFA3A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-west-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"SerenyaApi961F1E55"},"/test-invoke-stage/GET/subscriptions/current"]]}}}},"Resource":{"id":"Resource","path":"SerenyaBackend-dev/SerenyaApi/Default/subscriptions/current/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"JWTAuthorizerE8D8D90E"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubscriptionsFunctionDABFA3A1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"SerenyaApisubscriptionscurrent82971FD7"},"restApiId":{"Ref":"SerenyaApi961F1E55"}}}}}}}}}}}}}},"ApiGatewayLogGroup":{"id":"ApiGatewayLogGroup","path":"SerenyaBackend-dev/ApiGatewayLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SerenyaBackend-dev/ApiGatewayLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/apigateway/serenya-dev","retentionInDays":30}}}}},"ApiUrl":{"id":"ApiUrl","path":"SerenyaBackend-dev/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"ApiId":{"id":"ApiId","path":"SerenyaBackend-dev/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"TempBucketName":{"id":"TempBucketName","path":"SerenyaBackend-dev/TempBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"KmsKeyId":{"id":"KmsKeyId","path":"SerenyaBackend-dev/KmsKeyId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"DatabaseHost":{"id":"DatabaseHost","path":"SerenyaBackend-dev/DatabaseHost","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"DatabasePort":{"id":"DatabasePort","path":"SerenyaBackend-dev/DatabasePort","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"DatabaseSecretArn":{"id":"DatabaseSecretArn","path":"SerenyaBackend-dev/DatabaseSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"VpcId":{"id":"VpcId","path":"SerenyaBackend-dev/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SerenyaBackend-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"SerenyaBackend-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SerenyaBackend-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.213.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SerenyaBackend-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.213.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}